{{define "board"}}
{{template "select-side"}}
<button class="btn" hx-get="/games" hx-target="main">Back</button>
<div class="container text-center" hx-ext="ws" ws-connect="/ws/{{.GameId}}">
    <div id="info"></div>
    {{range $rowInx, $row := .Board}}
    <div class="row">
        {{range $colInx, $col := $row }}
        <div class="col">
            <form ws-send>
                <input type="hidden" name="col" value="{{$colInx}}">
                <input type="hidden" name="row" value="{{$rowInx}}">
                <button id="row-{{$rowInx}}-col-{{$colInx}}">
                    {{$col}}
                </button>
            </form>
        </div>
        {{end}}
    </div>
    {{end}}
</div>
{{end}}

{{define "select-side"}}
<dialog open id="select-side">
    <div>Select side:</div>
    <form method="dialog">
        <button hx-post="/select-side/x" hx-target="#select-side" hx-swap="outerHTML">X</button>
        <button hx-post="/select-side/o" hx-target="#select-side" hx-swap="outerHTML">O</button>
        <button hx-post="/select-side/spectate" hx-target="#select-side" hx-swap="outerHTML">spectate</button>
    </form>
</dialog>
{{end}}